{{> header}}

<div class="profile-section">
    <div class="profile-wrapper">
        <div class="profile-container">
            <img src="https://upload.wikimedia.org/wikipedia/commons/a/ac/Default_pfp.jpg?20200418092106" alt="Profile Picture">
            <img class="edit-icon" src="https://upload.wikimedia.org/wikipedia/commons/thumb/6/64/Edit_icon_%28the_Noun_Project_30184%29.svg/150px-Edit_icon_%28the_Noun_Project_30184%29.svg.png" alt="Edit Icon">
        </div>
        <div class="profile-info">
            <div class="name">{{name}}
                <button class="name-edit-button" onclick="toggleNameInput()">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/6/64/Edit_icon_%28the_Noun_Project_30184%29.svg/150px-Edit_icon_%28the_Noun_Project_30184%29.svg.png" alt="Edit Icon" class="name-edit-button-icon">
                </button>
            </div>
            <div id="name-input" style="display: none;">
                <form action="/profile/update-name" method="POST">
                    <label for="name">Change Name:</label>
                    <input type="text" id="name" name="name" value="{{name}}">
                    <button type="submit">Update Name</button>
                </form>
            </div>
            <div class="email">Technician | {{email}}</div>
        </div>
    </div>
    <div class="background-divider"></div>
</div>

<div class="reservations-title">Walk-in Reservations</div>

<div class="outer-container">
    <div class="reservations-space">
        {{#each reservations}}
        <div class="reservation-box">
            <p><strong>Lab: </strong>{{lab}}</p>
            <p><strong>Date: </strong>{{date}}</p>
            <p><strong>Time: </strong>{{startTime}}</p>
            <p><strong>Seats: </strong>{{count seats}}</p>
            <p><strong>For: </strong>{{name}}</p>
            <p><strong>Requested: </strong>{{requestDate}}</p>

            <div class="buttons-container">
                <button class="edit-button" onclick="openEditOverlay(this)">Edit</button>
                <button class="cancel-button">Cancel</button>
            </div>
        </div>
        {{/each}}
    </div>
</div>

<div class="overlay" id="overlay"></div>
<div class="edit-overlay" id="edit-overlay">
    <h2>Edit Reservation</h2>
    <label for="edit-lab">Lab:</label>
    <select id="edit-lab">
        <option value="Turing">Turing</option>
        <option value="Lovelace">Lovelace</option>
        <option value="Gosling">Gosling</option>
    </select>
    <label for="edit-date">Date:</label>
    <input type="date" id="edit-date">
    <label for="edit-time">Time:</label>
    <input type="time" id="edit-time">
    <label for="edit-seats">Seats:</label>
    <input type="text" id="edit-seats">
    <button class="confirm" onclick="confirmEdit()">Confirm</button>
    <button class="cancel" onclick="closeEditOverlay()">Cancel</button>
</div>

<div class="buttons-container">
    <button class="edit-button" onclick="logout()">Logout</button>
    <button class="cancel-button" onclick="deleteAccount()">Delete Account</button>
    <button class="edit-button" onclick="profileStudent()">View Student's Profile</button>
</div>

<script src="/common/js/profileLB.js"></script>